# bean

> 数据库表 -> entity

> 网络传输对象 -> dto

> dto转换：

```java
@PostMapping
 public User addUser(UserInputDTO userInputDTO){
         User user = convertFor(userInputDTO);

         return userService.addUser(user);
 }

 private User convertFor(UserInputDTO userInputDTO){

         User user = new User();
         BeanUtils.copyProperties(userInputDTO,user);
         return user;
 }
```

> 抽象接口定义

```java
public interface DTOConvert<S,T> {
    T convert(S s);
}

public class UserInputDTOConvert implements DTOConvert {
	@Override
	public User convert(UserInputDTO userInputDTO) {
		User user = new User();
		BeanUtils.copyProperties(userInputDTO,user);
		return user;
	}
}
```

> 接口应该返回dto

```java
@PostMapping
public UserOutputDTO addUser(UserInputDTO userInputDTO){
        User user = new UserInputDTOConvert().convert(userInputDTO);
        User saveUserResult = userService.addUser(user);
        UserOutputDTO result = new UserOutDTOConvert().convertToUser(saveUserResult);
        return result;
}
```

> 代码聚合

```java
@Data
public class UserInputDTO {
	private String username;
	private int age;
	
    public User convertToUser(){
        UserInputDTOConvert userInputDTOConvert = new UserInputDTOConvert();
        User convert = userInputDTOConvert.convert(this);
        return convert;
    }

    private static class UserInputDTOConvert implements DTOConvert<UserInputDTO,User> {
        @Override
        public User convert(UserInputDTO userInputDTO) {
            User user = new User();
            BeanUtils.copyProperties(userInputDTO,user);
            return user;
        }
    }
}
//使用
@PostMapping
public UserOutputDTO addUser(UserInputDTO userInputDTO){
		User user = userInputDTO.convertToUser();
		User saveUserResult = userService.addUser(user);
        UserOutputDTO result = new UserOutDTOConvert().convertToUser(saveUserResult);
        return result;
}
```

